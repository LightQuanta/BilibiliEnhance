(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{707:function(t,i,e){},708:function(t,i,e){},804:function(t,i,e){t.exports=e.p+"assets/empty_fans_list.png"},805:function(t,i,e){"use strict";e(707)},806:function(t,i,e){"use strict";e(708)},823:function(t,i,e){"use strict";e.r(i);var a=e(2),s=e.n(a),n=e(248),o=e(10),l=e(165),c=e(1),r={name:"search-component",model:{prop:"value",event:"change"},data:function(){return{isFocus:!1}},props:{name:{type:String,default:""},value:{type:[String,Number],default:""}},methods:{changeFn:function(t){this.$emit("change",t.target.value)},focusFn:function(){this.isFocus=!0},blurFn:function(){this.isFocus=!1},clickFn:function(){this.$emit("search"),this.$emit("clickSearch")}}},h=(e(805),e(4)),d=Object(h.a)(r,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("label",{staticClass:"search-component flex-c-l",class:{"search-component-focus":t.isFocus}},[e("div",{staticClass:"search-component-input"},[e("input",{attrs:{name:t.name},domProps:{value:t.value},on:{input:t.changeFn,focus:t.focusFn,blur:t.blurFn,keyup:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.$emit("search")}}})]),e("i",{staticClass:"icon icon-follow-search",on:{click:t.clickFn}})])}),[],!1,null,"52497d84",null).exports,u=e(71);function f(t,i){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,i){if(!t)return;if("string"==typeof t)return m(t,i);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return m(t,i)}(t))||i&&t&&"number"==typeof t.length){e&&(t=e);var a=0,s=function(){};return{s:s,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,l=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){l=!0,n=t},f:function(){try{o||null==e.return||e.return()}finally{if(l)throw n}}}}function m(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,a=new Array(i);e<i;e++)a[e]=t[e];return a}function p(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,a)}return e}function _(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?p(Object(e),!0).forEach((function(i){s()(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):p(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}var g=Object.keys(n),w={name:"fans",data:function(){return{isReload:!1,isActive:!0,type:"",sortStatus:1,params:{vmid:0,pn:1,ps:50,order:"desc",order_type:"attention"},followTotal:0,searchKey:"",isSearch:!1,searchTotal:0,userTagParams:{mid:0,tagid:1,pn:1,ps:50},modal:{show:!1,title:"确认弹窗",text:"",tip:"",params:{mid:"",type:""}},modal2:{show:!1,title:"",name:""},modal3:{show:!1,title:"",name:""},action:"",prohibit:!1,switchState:!0,isSorting:!1,isBatch:!1,api:"",newTagName:"",selectedUsers:[],selectedTags:[],editTagId:-1,editTopicId:-1,topTitle:"",tagid:-1,isMovingUsers:!1}},components:{SearchInput:d},beforeMount:function(){this.userTagParams.mid=this._bili_space_mid,this.params.vmid=this._bili_space_mid},mounted:function(){this.isReload=!1,this.isBatch=!1,this.selectedUsers=[],this.selectedTags=[],this.load(this.$route)},beforeRouteUpdate:function(t,i,e){this.isReload=!0,this.initSortData(),this.load(t),e()},beforeUpdate:function(){"fans"===this.$route.name?rec("space_navigation_my_fans_click",{is_self:"owner"===this._bili_space_state?1:2}):"follow"===this.$route.name&&(rec("space_navigation_my_follow_click",{is_self:"owner"===this._bili_space_state?1:2}),rec("main.my-attention.sort-list.0.click",{order_status:1===this.sortStatus?1:2})),rec("space_navigation_my_follow_group_click",{group:this.group,is_self:"owner"===this._bili_space_state?1:2})},methods:_(_({},Object(o.b)([].concat(g,["fetchRelation"]))),{},{cutText:u.b,load:function(t){var i=this,e=t.path,a=t.query,s=e.split("?")[0].split("/")[3],n=a.tagid;if(this.params.pn=1,this.userTagParams.pn=1,"owner"!==this._bili_space_state){switch(this.type=s,delete this.params.order_type,s){case"follow":this.tagid=-1,this.isSearch?this.api="followings/search":this.api="followings",!this.isFollowsHidden&&this.fetchRelationsList({params:this.searchParams,type:this.api}).then((function(t){i.followTotal=t.total}));break;case"fans":this.tagid=void 0,this.api="fans",this.fetchRelationsList({params:this.params,type:this.api});break;default:this.fetchRelationsList({params:this.params,type:this.api})}this.fetchRelation(this._bili_space_mid).then((function(t){var e=t.attribute;i.$store.commit(c.Pb,+e),i.$store.commit(c.gc,[2,6].indexOf(+e)>-1?"fans":"visitor")}))}else"follow"===s&&void 0===n&&(n=-1),this.type=s,this.tagid="fans"===s?void 0:+n,this.userTagParams.tagid=this.tagid,this.userTagParams.pn=1,this.isReload||(this.getUserTagList(),this.getKnight(this.params)),this.getMainList()},oftenVisit:function(){this.isActive=!0,this.sortStatus=1,this.params.order_type="attention",rec("main.my-attention.sort-list.0.click",{order_status:1}),this.load(this.$route)},recentFollow:function(){this.isActive=!1,this.sortStatus=2,this.params.order_type="",rec("main.my-attention.sort-list.0.click",{order_status:2}),this.load(this.$route)},searchFollow:function(){this.isActive=!1,this.sortStatus=2,this.params.order_type="",rec("main.my-attention.sort-list.0.click",{order_status:2}),this.load(this.$route)},initSortData:function(){this.params.order_type="attention",this.isActive=!0,this.sortStatus=1},addReport:function(t){rec("space_my_follow_list_click",{group:this.group,target:t,is_self:"owner"===this._bili_space_state?1:2})},getMainList:function(){var t=this;if("follow"===this.type)switch(this.tagid){case-1:this.isSearch?this.api="followings/search":this.api="followings",this.fetchRelationsList({params:this.searchParams,type:this.api}).then((function(i){t.followTotal=i.total}));break;case-3:this.getKnight(this.params).then((function(i){"follow"===t.type&&-3===t.tagid&&(0===i.length?t.$router.push({name:"follow",query:{tagid:-1}}):t.fetchFansVipInfo(i.map((function(t){return t.mid})).join(",")).then((function(e){var a,s=f(i);try{for(s.s();!(a=s.n()).done;){var n=a.value;n.vip=e[n.mid]}}catch(t){s.e(t)}finally{s.f()}t.modifyRelationList(i)})))}));break;case-2:this.fetchQuietlyFollowing(this.params);break;default:this.fetchUserTag(this.userTagParams)}else this.api="fans",this.fetchRelationsList({params:this.params,type:this.api})},coverEnter:Object(l.a)(300,!0,(function(t,i,e){var a=this,s="0,20";$(document).scrollTop()+$(window).height()-$(t.target).parents(".list-item ").offset().top<=250&&(s="-200,20"),this.$card({target:t.target,popperOptions:{placement:"right-start",modifiers:{offset:{offset:s}}},targetMid:i,myMid:this._bili_login_info.mid,upMid:this._bili_space_mid,cardReport:function(t){a.addReport(t)},followSuccess:function(){a.cardUpdateData(2,i)},unfollowSuccess:function(){a.cardUnfollowSuccess(i)},error:function(t){a.$warn(t.message).then((function(){1===t.code&&(window.location.href="https://passport.bilibili.com/login?gourl="+window.location.href)}))}})})),cardUpdateData:function(t,i){"owner"===this._bili_space_state&&this.getUserTagList(),this.updateRelationList({mid:i,attribute:t})},cardUnfollowSuccess:function(t){this.cardUpdateData(0,t),rec("space_my_follow_follow_click",{group:this.group,follow:!1,target:2,is_self:"owner"===this._bili_space_state?1:2})},handleRemoveAttention:function(t){var i=this;rec("space_my_follow_follow_click",{group:this.group,follow:!1,target:1,is_self:"owner"===this._bili_space_state?1:2}),this.modifyRelations({mid:t,act:2,needFetchNumber:"owner"===this._bili_space_state}).then((function(){i.updateRelationList({mid:t,attribute:0}),i.$toast("取消关注成功(ง •̀_•́)ง"),"owner"===i._bili_space_state&&i.fetchUserTagListLater()}))},handlePublicAttention:function(t){var i=this;this.modifyRelations({mid:t,act:1}).then((function(){i.$toast("全部关注成功(ง •̀_•́)ง"),i.updateRelationList({mid:t,attribute:2})}))},handleExitKnight:function(t,i){this.modal.show=!0,this.modal.title="确认操作",this.modal.text="确认要退出<em>".concat(i,"</em>的骑士团吗？"),this.modal.params.mid=t,this.modal.params.type="exitKnight"},handleRemoveFans:function(t,i){this.modal.show=!0,this.modal.title="确认移除粉丝",this.modal.text="确认要移除粉丝<em>".concat(i,"</em>吗？"),this.modal.tip="移除粉丝的同时会取消他的骑士资格",this.modal.params.mid=t,this.modal.params.type="removeFans"},handleAddTag:function(){this.modal2.title="新建分组",this.modal2.show=!0,this.modal2.name="addTag"},handleRemoveSilent:function(t){var i=this;this.modifyRelations({mid:t,act:4}).then((function(){i.$toast("取消悄悄关注成功(ง •̀_•́)ง"),i.updateRelationList({mid:t,attribute:0})}))},handleEditTag:function(t,i){this.newTagName=i,this.editTagName=i,this.editTagId=t,this.modal2.name="editTag",this.modal2.title="修改分组名称",this.modal2.show=!0},handleDelTag:function(t){var i=this;this.$confirm("确定要删除该分组么？删除之后，该分组下的用户依旧保留").then((function(){i.delUserTag(t).then((function(){i.$toast("删除成功(ง •̀_•́)ง"),setTimeout((function(){i.getUserTagList(),i.tagid===t&&i.$router.push({name:"follow",query:{tagid:0}})}),800)}),(function(){}))}))},selectFollow:function(t){var i=this.selectedTags.indexOf(t);i>-1?this.selectedTags.splice(i,1):this.selectedTags.push(t)},closeBatchPanel:function(){this.isBatch=!1,this.selectedUsers=[]},select:function(t){var i=this.selectedUsers.indexOf(t);i>-1?this.selectedUsers.splice(i,1):this.selectedUsers.push(t)},clearSelected:function(){this.selectedUsers=[],this.selectedTags=[]},handleCopyFollower:function(){0!==this.selectedNum&&(this.userTagList.some((function(t){return t.tagid>0}))?0===this._bili_login_info.mid?this.$warn("复制用户请先登录哦~"):(this.modal3.show=!0,this.modal3.name="copyUser"):(this.isMovingUsers=!0,this.modal3.show=!0,this.modal3.name="copyUser"))},handleMoveFollower:function(){0!==this.selectedNum&&(this.isMovingUsers=!0,this.modal3.show=!0,this.modal3.name="moveUser")},handleSetGroup:function(t,i){var e=this;$.getScript("//static.hdslb.com/common/js/followGroupDialog.js",(function(){window.followGroupDialog(t,i,{title:"设置分组",onSubmitError:function(t){$(".follow-dialog-wrap").remove(),e.$warn("加入分组失败，".concat(t))},onLoadTagsError:function(t){e.$warn("获取所有标签列表失败，".concat(t))},onLoadRelationError:function(t){e.$warn("获取标签列表失败，".concat(t))},onAddTagError:function(t){e.$warn("添加分组失败，".concat(t))},onSubmitSuccess:function(){e.$toast("加入分组成功(ง •̀_•́)ง"),setTimeout((function(){e.getUserTagList(),-1!==e.tagid&&(e.userTagParams.pn=1,e.getMainList())}),800)}})}))},handleFollow:function(t,i){var e=this;rec("space_my_follow_follow_click",{group:this.group,follow:!0,target:1,is_self:"owner"===this._bili_space_state?1:2});var a=this._bili_login_info.mid;if(0===a){var s=this;window.UserStatus&&window.UserStatus.quickLogin((function(){s.fetchBeRelation(t).then((function(i){var e=i.be_relation,a=i.relation;(e&&2==+e.attribute||0==+a.attribute)&&s.modifyRelations({mid:t,act:1}).then((function(){s.$toast("关注成功")})),setTimeout((function(){window.location.reload()}),500)})).catch((function(){window.location.reload()}))}))}else t===a?this.$warn("你时时刻刻都在关注你自己~"):this.modifyRelations({mid:t,act:1,needFetchNumber:"owner"===this._bili_space_state}).then((function(){e.getUserTagList(),e.fetchBeRelation(t).then((function(i){var a=i.be_relation;e.updateRelationList({mid:t,attribute:2===a.attribute?6:2})}))}))},turnPage:function(t){var i=this;if(t>5&&"owner"!==this._bili_space_state)this.prohibit=!0;else if("follow"===this.type)switch(this.tagid){case-1:this.isSearch?this.api="followings/search":this.api="followings",this.params.pn=t,this.fetchRelationsList({params:this.searchParams,type:this.api}).then((function(t){i.followTotal=t.total}));break;case-3:this.params.pn=t,this.getKnight(this.params).then((function(t){i.fetchFansVipInfo(t.map((function(t){return t.mid})).join(",")).then((function(e){var a,s=f(t);try{for(s.s();!(a=s.n()).done;){var n=a.value;n.vip=e[n.mid]}}catch(t){s.e(t)}finally{s.f()}i.modifyRelationList(t)}))}));break;case-2:this.params.pn=t,this.fetchQuietlyFollowing(this.params);break;default:this.userTagParams.pn=t,this.fetchUserTag(this.userTagParams)}else this.api="fans",this.params.pn=t,this.fetchRelationsList({params:this.params,type:this.api})},handleModalConfirm:function(){var t=this,i=this.modal.params,e=i.mid;switch(i.type){case"removeFans":this.modifyRelations({mid:e,act:7}).then((function(){1===t.relationList.length?(1===t.params.pn||t.params.pn--,t.fetchRelationsListLater("fans")):t.fetchRelationsListLater("fans")})),this.switchState&&this.modifyRelations({mid:e,act:5});break;case"exitKnight":var a=!1;1===this.relationList.length&&-3===this.tagid&&(1===this.params.pn?a=!0:this.params.pn--),this.exitKnight({mid:e}).then((function(){t.getKnight(t.params).then((function(i){a?t.$router.push({name:"follow",query:{tagid:-1}}):t.fetchFansVipInfo(i.map((function(t){return t.mid})).join(",")).then((function(e){var a,s=f(i);try{for(s.s();!(a=s.n()).done;){var n=a.value;n.vip=e[n.mid]}}catch(t){s.e(t)}finally{s.f()}t.modifyRelationList(i)}))}))}))}this.handleModalCancel()},fetchRelationsListLater:function(t){var i=this;setTimeout((function(){i.fetchRelationsList({params:i.params,type:t})}),800)},fetchUserTagListLater:function(){var t=this;setTimeout((function(){t.getUserTagList()}),800)},handleModalCancel:function(){this.modal.show=!1,this.modal.tip="",this.modal.text="",this.modal.title="",this.modal.params.type="",this.modal.params.mid=0},handleModal2Confirm:function(t){var i=this,e=t.name,a=this.editTagName,s=this.newTagName.trim().decodeHTML(),n=this.selectedUsers.join(",");switch(e){case"addTag":""===s?this.$warn("新建分组名称不能为空"):this.addUserTag(s).then((function(t){i.$toast("添加分组成功(ง •̀_•́)ง"),i.handleModal2Cancel(),i.isMovingUsers?(i.isMovingUsers=!1,i.isBatch=!1,i.selectedUsers=[],[-1,-10].indexOf(i.tagid)>-1?i.copyUser({fids:n,tagids:t}).then(i.fetchUserTagListLater):0===i.tagid&&i.moveUser({beforeTagids:0,afterTagids:t,fids:n}).then((function(){setTimeout((function(){i.getUserTagList(),i.getMainList()}),800)}))):i.fetchUserTagListLater()}),(function(){}));break;case"editTag":s===a?this.handleModal2Cancel():this.updateUserTag({tagid:this.editTagId,name:s}).then((function(){i.handleModal2Cancel(),i.$toast("编辑分组成功(ง •̀_•́)ง"),i.fetchUserTagListLater()}))}},handleModal2Cancel:function(){this.modal2.show=!1,this.modal2.name="",this.newTagName=""},handleModal3Confirm:function(t){var i=this,e=t.name,a=this.selectedUsers.join(","),s=this.selectedTags.join(",");switch(e){case"copyUser":if(0===this.selectedTags.length)return;this.copyUser({fids:a,tagids:s}).then((function(){i.handleModal3Cancel(),i.isBatch=!1,i.clearSelected(),i.$toast("复制成功(ง •̀_•́)ง"),i.fetchUserTagListLater()}),(function(){}));break;case"moveUser":if(0===this.selectedTags.length)return;this.moveUser({beforeTagids:this.tagid,afterTagids:s,fids:a}).then((function(){i.handleModal3Cancel(),i.isBatch=!1,i.clearSelected(),i.$toast("加入分组成功(ง •̀_•́)ง"),setTimeout((function(){i.getUserTagList(),i.getMainList()}),800)}),(function(){}))}},handleModal3Cancel:function(){this.modal3.show=!1,this.modal3.name=""},btnTitle:function(t){return 0===this._bili_login_info.mid||0==+t&&"follow"===this.type?"关注":0==+t&&"fans"===this.type?(this._bili_space_mid,this._bili_login_info.mid,"关注"):+t>=128?"关注":void 0},isFollowBack:function(t){return 0==+t&&"fans"===this.type&&this._bili_space_mid===this._bili_login_info.mid},clickSearch:function(){rec("my_follow_search_click")},searchFn:function(){this.searchKey&&(this.isSearch=!0)},saerchBack:function(){this.isSearch=!1,this.searchKey=""},handleIntoFollows:function(){this.isFollowsHidden&&"follow"!==this.type&&this.$toast("由于该用户隐私设置，关注列表不可见")}}),watch:{"$route.path":function(){"fans"===this.$route.name?rec("space_navigation_my_fans_click",{is_self:"owner"===this._bili_space_state?1:2}):"follow"===this.$route.name&&(rec("space_navigation_my_follow_click",{is_self:"owner"===this._bili_space_state?1:2}),rec("main.my-attention.sort-list.0.click",{order_status:1===this.sortStatus?1:2})),this.isReload=!0,this.initSortData(),this.load(this.$route)},tagid:function(t){rec("space_navigation_my_follow_group_click",{group:this.group,is_self:"owner"===this._bili_space_state?1:2}),-1===t&&rec("main.my-attention.sort-list.0.click",{order_status:1===this.sortStatus?1:2})},isSearch:function(t){this.turnPage(1),t&&rec("my_follow_search_confirm")}},filters:{userDesc:function(t){if(void 0===t||0===t.length)return"no-desc"},followType:function(t){var i;switch(t){case-1:i="icon-follow-all";break;case-2:i="icon-follow-silent";break;case-3:i="icon-follow-knight";break;case-10:i="icon-follow-special"}return i}},computed:_(_({},Object(o.c)(["_bili_space_mid","_bili_login_info","_bili_space_state","_bili_space_settings","isRelationListLoad","relationList","knightsCount","relations","userTagList","userTag","defaultGroupCount"])),{},{isFollowsHidden:function(){var t;return(null===(t=this._bili_space_settings.privacy)||void 0===t?void 0:t.disable_following)&&"owner"!==this._bili_space_state},isFollowsHiddenBackup:function(){return this.isFollowsHidden&&"follow"===this.type},group:function(){var t=0;if(this.tagid||0===this.tagid)switch(this.tagid){case-1:t=1;break;case-10:t=2;break;case-2:t=3;break;case 0:t=4;break;default:t=5}else t=6;return t},emptyTip:function(){if(this.isSearch&&-1===this.tagid)return"没有搜到相关用户哦~";var t="owner"===this._bili_space_state?+this.tagid>0?"该分组":"你":"TA",i="";switch(this.tagid){case void 0:i="粉丝";break;case-1:i="关注用户";break;case-2:i="悄悄关注用户";break;case-3:i="被任命为骑士";break;case-10:i="特别关注的up主";break;default:i="用户"}return"".concat(t,"还没有").concat(i,"哦~")},selectedNum:function(){return this.selectedUsers.length},curTag:function(){var t=this.tagid,i=this.type,e={name:"",count:0,id:t,tip:""};if("fans"===i)e.name="".concat("owner"===this._bili_space_state?"我":"Ta","的粉丝"),e.count=this.relations.follower;else{var a=t<0&&t>-10?this.staticTags.find((function(i){return i.tagid===t})):this.userTagList.find((function(i){return i.tagid===t}));a&&(e.name=a.name,e.count=-1===a.tagid?this.followTotal:a.count,e.tip=a.tip||"")}return e},staticTags:function(){var t=[{tagid:-1,name:"全部关注",count:this.relations.following}];if("owner"===this._bili_space_state){var i=this.userTagList.find((function(t){return-10===t.tagid}));i&&t.push({tagid:-10,name:"特别关注",count:i.count}),t.push({tagid:-2,name:"悄悄关注",count:this.relations.whisper})}return t},curPage:function(){return this.tagid>=0||-10===this.tagid?this.userTagParams.pn:this.params.pn},totalPage:function(){return Math.ceil(this.curTag.count/50)},searchParams:function(){return this.isSearch?_(_({},this.params),{},{name:this.searchKey}):this.params}}),asyncData:function(t,i){var e=t.dispatch,a=i.cookie,s=i.mid;return Promise.all([e("fetchInfo",{mid:s,cookie:a}),e("fetchSettings",{mid:s,cookie:a})])}},v=(e(806),Object(h.a)(w,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"clearfix col-full",attrs:{page:t.type}},[a("div",{staticClass:"follow-sidenav"},[a("div",{staticClass:"nav-container follow-container"},[a("div",{staticClass:"nav-title"},[a("span",{staticClass:"text"},[t._v(t._s("owner"===t._bili_space_state?"我":"Ta")+"的关注")]),"owner"===t._bili_space_state?a("span",{staticClass:"icon icon-add",attrs:{title:"创建新分组"},on:{click:t.handleAddTag}}):t._e()]),a("be-scrollbar",{staticClass:"follow-list-container",attrs:{source:t.userTagList}},[a("ul",{staticClass:"follow-list"},[t._l(t.staticTags,(function(i,e){return a("li",{key:"key-"+e,staticClass:"follow-item",class:{cur:i.tagid===t.tagid}},[a("span",{staticClass:"icon icon-follow",class:t._f("followType")(i.tagid)}),a(t.isFollowsHidden?"div":"router-link",{tag:"component",staticClass:"text",attrs:{to:{name:"follow",query:{tagid:i.tagid}}},on:{click:t.handleIntoFollows}},[t._v("\n              "+t._s(i.name)+"\n            ")]),a("span",{staticClass:"num",attrs:{title:i.count}},[t._v(t._s(t._f("toWan")(i.count)))])],1)})),"owner"===t._bili_space_state?t._l(t.userTagList,(function(i,e){return a("li",{directives:[{name:"show",rawName:"v-show",value:-10!==i.tagid,expression:"item.tagid !== -10"}],key:e,staticClass:"follow-item",class:{cur:i.tagid===t.tagid,"custom-group":0!==i.tagid},attrs:{tagid:i.tagid}},[a("span",{staticClass:"icon icon-follow",class:[0===i.tagid?"icon-follow-default":"icon-follow-public"]}),a("router-link",{staticClass:"text",attrs:{title:i.name,to:{name:"follow",query:{tagid:i.tagid}}}},[t._v(t._s(t._f("decodeHTML")(i.name)))]),a("span",{staticClass:"num"},[t._v(t._s(t._f("toWan")(i.count)))]),a("be-dropdown",{attrs:{trigger:"hover"}},[a("be-dropdown-menu",[a("be-dropdown-item",{attrs:{delimiter:""},nativeOn:{click:function(e){return t.handleEditTag(i.tagid,i.name)}}},[t._v("修改名称")]),a("be-dropdown-item",{nativeOn:{click:function(e){return t.handleDelTag(i.tagid)}}},[t._v("删除")])],1)],1)],1)})):t._e()],2)])],1),a("div",{staticClass:"nav-container topic-container"},[a("div",{staticClass:"nav-title"},[a("span",{staticClass:"text"},[t._v(t._s("owner"===t._bili_space_state?"我":"Ta")+"的粉丝")])]),a("div",{staticClass:"follow-list-container"},[a("ul",[a("li",{staticClass:"follow-item",class:{cur:null==t.tagid}},[a("span",{staticClass:"icon icon-follow icon-follow-fans"}),a("router-link",{staticClass:"text",attrs:{to:{name:"fans"}}},[t._v(t._s("owner"===t._bili_space_state?"我":"Ta")+"的粉丝")]),a("span",{staticClass:"num",attrs:{title:t.relations.follower}},[t._v(t._s(t._f("toWan")(t.relations.follower)))])],1)])])])]),a("div",{staticClass:"follow-main"},[a("div",{directives:[{name:"show",rawName:"v-show",value:-1===t.tagid?!t.isBatch&&!t.isSearch:!t.isBatch,expression:"tagid === -1 ? (!isBatch && !isSearch) : !isBatch"}],staticClass:"follow-header follow-header-info"},[a("div",{staticClass:"breadcrumb flex-c-s"},[a("p",{staticClass:"item cur"},[t._v(t._s(t.curTag.name))]),a("div",{staticClass:"flex-c-l"},["follow"===t.type&&-1===t.tagid&&t.relationList.length>0&&"owner"===t._bili_space_state?a("div",{staticClass:"follow-tabs"},[a("span",{class:{active:t.isActive},on:{click:t.oftenVisit}},[t._v("最常访问")]),a("span",{class:{active:!t.isActive},on:{click:t.recentFollow}},[t._v("最近关注")])]):t._e(),"follow"===t.type&&-1===t.tagid&&t.relationList.length>0&&"owner"===t._bili_space_state?a("SearchInput",{staticClass:"follow-search",on:{search:t.searchFn,clickSearch:t.clickSearch},model:{value:t.searchKey,callback:function(i){t.searchKey=i},expression:"searchKey"}}):t._e(),"owner"===t._bili_space_state&&"follow"===t.type&&t.curTag.count>0&&-1===[-2,-3].indexOf(t.tagid)?a("i",{staticClass:"icon-multiple",on:{click:function(i){t.isBatch=!0}}}):t._e()],1)]),-10===t.tagid?a("p",{staticClass:"quietly-notice"},[t._v(t._s(t.curTag.tip))]):t._e()]),t.isSearch&&-1===t.tagid?a("div",{staticClass:"follow-header follow-header-action"},[a("div",{staticClass:"follow-action-top flex-c-s"},[a("div",{staticClass:"back-to-info icon",on:{click:t.saerchBack}},[t._v("返回")]),a("p",{staticClass:"follow-search-result"},[t._v("\n          "+t._s(0===t.totalPage?"没有搜到相关用户哦":"共找到关于“"+t.cutText(t.searchKey)+"”的"+t.followTotal+"个关注")+"\n          ")])])]):t._e(),t.isBatch?a("div",{staticClass:"follow-header follow-header-action"},[a("div",{staticClass:"follow-action-top"},[a("div",{staticClass:"back-to-info icon",on:{click:t.closeBatchPanel}},[t._v("返回")])]),a("div",{staticClass:"follow-action-bottom"},[a("div",{staticClass:"follow-action-fixtop clearfix"},[a("ul",{staticClass:"clearfix",class:{"filter-disable":0===t.selectedNum}},[0!==t.tagid?a("li",{on:{click:t.handleCopyFollower}},[a("i",{staticClass:"icon icon-copy"}),t._v("复制到\n            ")]):t._e(),-1!==t.tagid?a("li",{on:{click:t.handleMoveFollower}},[a("i",{staticClass:"icon icon-move"}),t._v("移动到\n            ")]):t._e()]),a("div",{staticClass:"edit-detail"},[a("span",{staticClass:"select-counter"},[t._v("\n              已选择"),a("i",[t._v(t._s(t.selectedNum))]),t._v("个up主\n            ")]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.selectedNum>0,expression:"selectedNum > 0"}],staticClass:"select-cancel",on:{click:t.clearSelected}},[t._v("取消选择")])])])])]):t._e(),t.isFollowsHiddenBackup?a("div",{staticClass:"hide-follows"},[a("img",{staticClass:"hide-follows__img",attrs:{src:e(804),alt:"Ta关闭了展示关注列表"}}),t._m(0)]):a("div",{staticClass:"follow-content section",class:{loading:!t.isRelationListLoad,empty:!!t.isRelationListLoad&&0===t.relationList.length}},[a("div",{staticClass:"search-empty-hint"},[a("p",[t._v(t._s(t.emptyTip))])]),a("div",{staticClass:"content",staticStyle:{"padding-bottom":"10px"}},[a("ul",{staticClass:"relation-list"},t._l(t.relationList,(function(i){return a("li",{key:i.mid,staticClass:"list-item clearfix",class:{"list-item-select":t.isBatch}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isBatch,expression:"isBatch"}],staticClass:"follow-select",on:{click:function(e){return t.select(i.mid)}}},[a("div",{staticClass:"icon icon-follow-watched",class:{"icon-follow-selected":t.selectedUsers.indexOf(i.mid)>-1}})]),a("a",{staticClass:"cover",attrs:{href:"//space.bilibili.com/"+i.mid+"/",target:"_blank"},on:{mouseenter:function(e){return t.coverEnter(e,i.mid,i.uname)}}},[a("img",{attrs:{src:t._f("coversize")(i.face,"96x96"),alt:i.uname},on:{click:function(i){return t.addReport(1)}}}),0===i.official_verify.type?a("span",{staticClass:"user-auth-subscript avatar-b personal-auth",attrs:{"data-user-auth":"",title:"个人认证"}}):t._e(),1===i.official_verify.type?a("span",{staticClass:"user-auth-subscript avatar-b organization-auth",attrs:{"data-user-auth":"",title:"企业/团体认证"}}):t._e()]),a("div",{staticClass:"content"},[a("a",{staticClass:"title",attrs:{href:"//space.bilibili.com/"+i.mid+"/",target:"_blank"},on:{mouseenter:function(e){return t.coverEnter(e,i.mid,i.uname)}}},[i.is_charge?a("span",{staticClass:"fans-charged "},[t._v("已充电")]):t._e(),a("span",{staticClass:"fans-name",style:{color:i.vip?i.vip.nickname_color:""},on:{click:function(i){return t.addReport(2)}}},[t._v(t._s(i.uname))]),a("span",{style:{color:"#0CC",fontSize:"12px",marginLeft:"10px"}},[t._v(t._s(i.mtime?"关注时间："+new Date(i.mtime*1000).toLocaleString():""))])]),i.official_verify.desc&&0!==i.official_verify.desc.length?a("p",{staticClass:"auth-description",class:t._f("userDesc")(i.official_verify.desc),attrs:{title:i.official_verify.desc}},[t._v("\n                "+t._s(t._f("decodeHTML")(i.official_verify.desc))+"\n              ")]):a("p",{staticClass:"desc",attrs:{title:i.sign||"这个人没有填简介啊~~~"}},[t._v("\n                "+t._s(t._f("decodeHTML")(i.sign||"这个人没有填简介啊~~~"))+"\n              ")]),a("div",{staticClass:"fans-action"},[0!==i.attribute&&i.attribute<128?a("be-dropdown",{staticClass:"fans-action-btn fans-action-follow",attrs:{trigger:"hover"}},[a("template",{slot:"trigger"},[a("i",{staticClass:"iconfont video-commonmenu"}),2===i.attribute?a("span",{staticClass:"fans-action-text"},[t._v("已关注")]):t._e(),6===i.attribute?a("span",{staticClass:"fans-action-text"},[t._v("已互粉")]):t._e(),1===i.attribute?a("span",{staticClass:"fans-action-text"},[t._v("已悄悄关注")]):t._e()]),a("be-dropdown-menu",{attrs:{slot:"menu"},slot:"menu"},[1!==i.attribute?[a("be-dropdown-item",{nativeOn:{click:function(e){return t.handleSetGroup(i.mid,i.uname)}}},[t._v("\n                        设置分组\n                      ")]),a("be-dropdown-item",{nativeOn:{click:function(e){return t.handleRemoveAttention(i.mid,i.uname)}}},[t._v("\n                        取消关注\n                      ")])]:t._e(),1===i.attribute?a("be-dropdown-item",{nativeOn:{click:function(e){return t.handleRemoveSilent(i.mid,i.uname)}}},[t._v("\n                      取消关注\n                    ")]):t._e()],2)],2):a("div",{staticClass:"fans-action-btn follow",on:{click:function(e){return t.handleFollow(i.mid,i.uname)}}},[a("i",{class:{"icon-back-follow grey":t.isFollowBack(i.attribute)}}),a("span",{staticClass:"fans-action-text"},[t._v(t._s(t.btnTitle(i.attribute)))])]),a("be-dropdown",{attrs:{trigger:"hover"}},[a("be-dropdown-menu",[a("be-dropdown-item",[a("a",{attrs:{target:"_blank",href:"//message.bilibili.com/#whisper/mid"+i.mid}},[t._v("发消息")])]),"owner"===t._bili_space_state?["fans"===t.type?a("be-dropdown-item",{nativeOn:{click:function(e){return t.handleRemoveFans(i.mid,i.uname)}}},[t._v("移除粉丝")]):t._e(),1===i.attribute?a("be-dropdown-item",{nativeOn:{click:function(e){return t.handlePublicAttention(i.mid)}}},[t._v("转为全部关注")]):t._e(),-3===t.tagid?a("be-dropdown-item",{nativeOn:{click:function(e){return t.handleExitKnight(i.mid,i.uname)}}},[t._v("退出骑士团")]):t._e()]:t._e()],2)],1)],1)])])})),0),a("be-pagination",{attrs:{total:t.totalPage,current:t.curPage},on:{"turn-page":t.turnPage}})],1)])]),a("modal",{staticClass:"blacklist-modal",attrs:{show:t.modal.show},on:{confirm:t.handleModalConfirm,cancel:t.handleModalCancel}},[a("template",{slot:"title"},[t._v("\n      "+t._s(t.modal.title)+"\n    ")]),a("template",{slot:"body"},[a("p",{staticClass:"content-text",domProps:{innerHTML:t._s(t.modal.text)}}),"removeFans"===t.modal.params.type?a("be-switch",{attrs:{"on-label":"同时将此用户加入黑名单","off-label":"同时将此用户加入黑名单"},model:{value:t.switchState,callback:function(i){t.switchState=i},expression:"switchState"}}):t._e(),a("p",{staticClass:"content-tip"},[t._v(t._s(t.modal.tip))])],1)],2),a("modal",{attrs:{show:t.modal2.show,name:t.modal2.name},on:{confirm:t.handleModal2Confirm,cancel:t.handleModal2Cancel}},[a("template",{slot:"title"},[t._v("\n      "+t._s(t.modal2.title)+"\n    ")]),a("template",{slot:"body"},[a("be-input",{attrs:{maxlength:16,count:!0,placeholder:"最多输入16个字"},model:{value:t.newTagName,callback:function(i){t.newTagName=i},expression:"newTagName"}})],1)],2),a("modal",{staticClass:"edit-video-modal",attrs:{show:t.modal3.show,name:t.modal3.name,"cancel-button":{show:!1}},on:{confirm:t.handleModal3Confirm,cancel:t.handleModal3Cancel}},[a("template",{slot:"title"},[a("p",{staticClass:"edit-video-title"},[t._v("你正在"+t._s("copyUser"===t.modal3.name?"复制":"移动")+t._s(t.selectedNum)+"个up主")])]),a("template",{slot:"body"},[a("be-scrollbar",{staticClass:"target-followlist",attrs:{source:t.userTagList}},[a("ul",{staticClass:"target-followlist-container"},t._l(t.userTagList,(function(i){return a("li",{directives:[{name:"show",rawName:"v-show",value:0!==i.tagid,expression:"item.tagid !== 0"}],key:i.tagid,staticClass:"target-followitem clearfix",on:{click:function(e){return t.selectFollow(i.tagid)}}},[a("span",{staticClass:"follow-select"},[a("i",{staticClass:"icon icon-follow-watched",class:{"icon-follow-selected":t.selectedTags.indexOf(i.tagid)>-1}})]),a("div",{staticClass:"target-follow-name",attrs:{title:i.name}},[a("span",[t._v(t._s(i.name))]),-10===i.tagid?a("p",{staticClass:"target-follow-notice"},[t._v(t._s(i.tip))]):t._e()])])})),0)])],1)],2),a("modal",{staticClass:"prohibit-modal",attrs:{show:t.prohibit,"cancel-button":{show:!1}},on:{confirm:function(i){t.prohibit=!1},cancel:function(i){t.prohibit=!1}}},[a("template",{slot:"title"},[t._v("\n      系统限制只能访问前五页\n    ")]),a("template",{slot:"body"},[a("div",{staticClass:"not-allow"})])],2)],1)}),[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"hide-follows__desc"},[i("span",[this._v("Ta关闭了展示关注列表")])])}],!1,null,null,null));i.default=v.exports}}]);
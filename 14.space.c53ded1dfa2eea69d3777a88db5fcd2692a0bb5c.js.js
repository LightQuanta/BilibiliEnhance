(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{625:function(t,i,e){},629:function(t,i,e){"use strict";e(625)},630:function(t,i,e){"use strict";var a=e(2),n=e.n(a),s=e(10);function r(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,a)}return e}var c={name:"contribution-sidenav",computed:function(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?r(Object(e),!0).forEach((function(i){n()(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}({},Object(s.c)(["_bili_space_nav"]))},u=(e(629),e(4)),o=Object(u.a)(c,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"contribution-sidenav"},[e("div",{staticClass:"nav-container playlist-container"},[e("div",{staticClass:"contribution-list-container"},[e("ul",{staticClass:"contribution-list"},[e("li",{staticClass:"contribution-item",class:{cur:"video"===t.$route.name}},[e("router-link",{staticClass:"text",attrs:{to:{name:"video"}}},[t._v("视频")]),e("span",{staticClass:"num"},[t._v(t._s(t._f("toWan")(t._bili_space_nav.video)))])],1),e("li",{staticClass:"contribution-item",class:{cur:"audio"===t.$route.name}},[e("router-link",{staticClass:"text",attrs:{to:{name:"audio"}}},[t._v("音频")]),e("span",{staticClass:"num"},[t._v(t._s(t._f("toWan")(t._bili_space_nav.audio)))])],1),e("li",{staticClass:"contribution-item",class:{cur:"article"===t.$route.name}},[e("router-link",{staticClass:"text",attrs:{to:{name:"article"}}},[t._v("专栏")]),e("span",{staticClass:"num"},[t._v(t._s(t._f("toWan")(t._bili_space_nav.article)))])],1),e("li",{staticClass:"contribution-item",class:{cur:"album"===t.$route.name}},[e("router-link",{directives:[{name:"rep",rawName:"v-rep",value:"space_contribution_nav_album",expression:"'space_contribution_nav_album'"}],staticClass:"text",attrs:{to:{name:"album"}}},[t._v("相簿")]),e("span",{staticClass:"num"},[t._v(t._s(t._f("toWan")(t._bili_space_nav.album)))])],1)])])])])}),[],!1,null,null,null);i.a=o.exports},709:function(t,i,e){},710:function(t,i,e){},711:function(t,i,e){},807:function(t,i,e){"use strict";e(709)},808:function(t,i,e){"use strict";e(710)},809:function(t,i,e){"use strict";e(711)},820:function(t,i,e){"use strict";e.r(i);var a=e(2),n=e.n(a),s={width:190,height:143,inited:!1},r={filters:{numberFormat:function(t){return t>9999?(t/1e4).toFixed(1)+"万":t}},props:{item:{type:Object,required:!0}},computed:{title:function(){return this.item.title||this.item.description||"分享图片"},jumpUrl:function(){return"//t.bilibili.com/".concat(this.item.dyn_id)},pictureStyle:function(){var t=this.bfsImg(this.getValueSafely(["pictures",0,"img_src"],this.item),s.width,s.height,{scale:"1e"});return{backgroundImage:"url(".concat(t,")")}}},mounted:function(){s.inited||this.initImgConfig()},methods:{initImgConfig:function(){s.width=window.innerWidth>1420?190:160,s.height=window.innerWidth>1420?143:120,s.inited=!0},bfsImg:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3?arguments[3]:void 0,n=/\.(png|jpg)$/;if(!n.test(t))return t;var s=function(){try{return 0===document.createElement("canvas").toDataURL("image/webp",.5).indexOf("data:image/webp")}catch(t){return!1}}(),r=t.match(/(\w+)$/)?t.match(/.(\w+)$/)[0]:"",c=a.useWebp,u=a.scale;return t&&"string"==typeof t&&/\.(jpg|gif|png)/.test(t)?t=t+("number"==typeof i?"@"+i+"w":"")+("number"==typeof e?("number"==typeof i?"_":"@")+e+"h":"")+("string"==typeof u?"_".concat(u):"")+(s||c?".webp":r):t},getValueSafely:function(t,i){return t.reduce((function(t,i){return t&&t[i]?t[i]:null}),i)}}},c=(e(807),e(4)),u=Object(c.a)(r,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"album-card"},[e("a",{staticClass:"album-card__picture",style:t.pictureStyle,attrs:{href:t.jumpUrl,target:"_blank"}},[t.item.count>1?e("span",{staticClass:"album-card__picture-count"},[t._v(t._s(t.item.count+"P"))]):t._e()]),e("a",{staticClass:"album-card__title",attrs:{href:t.jumpUrl,target:"_blank"}},[t._v(t._s(t.title))]),e("div",{staticClass:"album-card__info"},[e("span",{staticClass:"album-card__count"},[e("span",{staticClass:"album-card__count-icon--view"}),e("span",{staticClass:"album-card__count-text"},[t._v(t._s(t._f("numberFormat")(t.item.view)))])]),e("span",{staticClass:"album-card__count"},[e("span",{staticClass:"album-card__count-icon--like"}),e("span",{staticClass:"album-card__count-text"},[t._v(t._s(t._f("numberFormat")(t.item.like)))])])]),e("span",{staticStyle:{position:"absolute",fontSize:"10px",color:"#bbc3cc",marginTop:"-4px"}},[t._v(t._s(new Date(t.item.ctime*1000).toLocaleString()))])])}),[],!1,null,null,null).exports,o=e(10);function l(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,a)}return e}function b(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?l(Object(e),!0).forEach((function(i){n()(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}var m={name:"AlbumList",components:{AlbumCard:u},data:function(){return{pageNum:1,pageSize:30,biz:"all"}},computed:b({title:function(){return"owner"===this._bili_space_state?"我的相簿":"TA的相簿"},userId:function(){try{return location.href.match(/(?:space.bilibili.com\/)(\d+)/)[1]}catch(t){return""}},ifShowContent:function(){return!this.isAlbumLoading&&!this.isAlbumError},ifShowError:function(){return this.isAlbumError}},Object(o.c)(["_bili_space_state","albumTabList","albumDocList","isAlbumLoading","isAlbumError"])),mounted:function(){this.init()},methods:b(b({},Object(o.b)(["getDocCount","getDocList"])),{},{init:function(){this.getDocCount({uid:this.userId,pageSize:this.pageSize}),this.getDocList({uid:this.userId,page_num:this.pageNum-1,page_size:this.pageSize,biz:this.biz})},switchTab:function(t){this.biz=t,this.getDocList({uid:this.userId,page_num:this.pageNum-1,page_size:this.pageSize,biz:this.biz})},turnPage:function(t){this.pageNum=t,this.getDocList({uid:this.userId,page_num:this.pageNum-1,page_size:this.pageSize,biz:this.biz})}})},_=(e(808),Object(c.a)(m,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"album-list"},[e("div",{staticClass:"album-list__title"},[t._v(t._s(t.title))]),t.albumTabList.all.count?e("div",{staticClass:"album-list__tabs"},[t._l(t.albumTabList,(function(i,a){return[i.count?e("span",{key:a,staticClass:"album-list__tab",class:{"album-list__tab--active":a===t.biz},on:{click:function(i){return t.switchTab(a)}}},[e("span",{staticClass:"album-list__tab-name"},[t._v(t._s(i.name))]),e("span",{staticClass:"album-list__tab-count"},[t._v(t._s(i.count))])]):t._e()]}))],2):t._e(),e("transition",{attrs:{name:"album-fade"}},[t.ifShowContent?e("div",{staticClass:"album-list__content"},[t._l(t.albumDocList,(function(t,i){return[e("album-card",{key:i,attrs:{item:t}})]}))],2):t._e()]),e("div",{staticClass:"album-list__pagination"},[e("be-pagination",{attrs:{total:t.albumTabList[t.biz].pageTotal,current:t.pageNum},on:{"turn-page":t.turnPage}})],1),t.ifShowError?e("div",{staticClass:"album-list__error"},[e("div",{staticClass:"album-list__error-placeholder"}),e("div",{staticClass:"album-list__error-text"},[t._v("空间主人还没有投过相簿哦~")])]):t._e()],1)}),[],!1,null,null,null).exports),p={name:"myalbum",components:{contributionSidenav:e(630).a,AlbumList:_},asyncData:function(t,i){var e=t.dispatch,a=i.cookie,n=i.mid;return Promise.all([e("fetchInfo",{mid:n,cookie:a}),e("fetchSettings",{mid:n,cookie:a})])}},f=(e(809),Object(c.a)(p,(function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("div",{staticClass:"wrapper",attrs:{id:"page-myalbum"}},[i("div",{staticClass:"col-full clearfix"},[i("contribution-sidenav"),i("div",{staticClass:"album-content"},[i("album-list")],1)],1)])])}),[],!1,null,null,null));i.default=f.exports}}]);